"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6308],{40817:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>h});var t=s(85893),n=s(11151),a=s(65488),o=s(85162);const i={},c="Local Weave Scorers",l={id:"guides/evaluation/weave_local_scorers",title:"Local Weave Scorers",description:"Weave's local scorers are a suite of small language models that run locally on your machine with minimal latency. These models evaluate the safety and quality of your AI system\u2019s inputs, context, and outputs.",source:"@site/docs/guides/evaluation/weave_local_scorers.md",sourceDirName:"guides/evaluation",slug:"/guides/evaluation/weave_local_scorers",permalink:"/guides/evaluation/weave_local_scorers",draft:!1,unlisted:!1,editUrl:"https://github.com/wandb/weave/blob/master/docs/docs/guides/evaluation/weave_local_scorers.md",tags:[],version:"current",lastUpdatedAt:1743058466e3,frontMatter:{}},d={},h=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Select a scorer",id:"select-a-scorer",level:2},{value:"<code>WeaveBiasScorerV1</code>",id:"weavebiasscorerv1",level:2},{value:"Usage notes",id:"usage-notes",level:3},{value:"Usage example",id:"usage-example",level:3},{value:"<code>WeaveToxicityScorerV1</code>",id:"weavetoxicityscorerv1",level:2},{value:"Usage notes",id:"usage-notes-1",level:3},{value:"Usage example",id:"usage-example-1",level:3},{value:"<code>WeaveHallucinationScorerV1</code>",id:"weavehallucinationscorerv1",level:2},{value:"Usage notes",id:"usage-notes-2",level:3},{value:"Usage example",id:"usage-example-2",level:3},{value:"<code>WeaveContextRelevanceScorerV1</code>",id:"weavecontextrelevancescorerv1",level:2},{value:"Usage notes",id:"usage-notes-3",level:3},{value:"Usage example",id:"usage-example-3",level:3},{value:"<code>WeaveCoherenceScorerV1</code>",id:"weavecoherencescorerv1",level:2},{value:"Usage notes",id:"usage-notes-4",level:3},{value:"Usage example",id:"usage-example-4",level:3},{value:"<code>WeaveFluencyScorerV1</code>",id:"weavefluencyscorerv1",level:2},{value:"Usage notes",id:"usage-notes-5",level:3},{value:"Usage example",id:"usage-example-5",level:3},{value:"<code>WeaveTrustScorerV1</code>",id:"weavetrustscorerv1",level:2},{value:"Usage notes",id:"usage-notes-6",level:3},{value:"Usage example",id:"usage-example-6",level:3},{value:"<code>PresidioScorer</code>",id:"presidioscorer",level:2},{value:"Usage notes",id:"usage-notes-7",level:3},{value:"Usage example",id:"usage-example-7",level:3}];function u(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.h1,{id:"local-weave-scorers",children:"Local Weave Scorers"}),"\n",(0,t.jsx)("a",{target:"_blank",href:"https://colab.research.google.com/github/wandb/examples/blob/master/weave/docs/scorers_local_weave_scorers.ipynb",children:(0,t.jsx)("img",{src:"https://colab.research.google.com/assets/colab-badge.svg",alt:"Open In Colab"})}),"\n",(0,t.jsxs)(r.p,{children:["Weave's local scorers are a suite of small language models that run locally on your machine with minimal latency. These models evaluate the ",(0,t.jsx)(r.strong,{children:"safety"})," and ",(0,t.jsx)(r.strong,{children:"quality"})," of your AI system\u2019s inputs, context, and outputs."]}),"\n",(0,t.jsxs)(r.p,{children:["Some of these models are fine-tuned by Weights & Biases, while others are state-of-the-art open-source models trained by the community. Weights & Biases (W&B) Reports were used for training and evaluation. You can find the full details in this ",(0,t.jsx)(r.a,{href:"https://wandb.ai/c-metrics/weave-scorers/reports/Weave-Scorers-v1--VmlldzoxMDQ0MDE1OA",children:"list of W&B Reports"}),"."]}),"\n",(0,t.jsxs)(r.p,{children:["The model weights are publicly available in W&B Artifacts and are automatically downloaded when you instantiate the scorer class. The artifact paths can be found here if you'd like to download them yourself: ",(0,t.jsx)(r.code,{children:"weave.scorers.default_models"})]}),"\n",(0,t.jsxs)(r.p,{children:["The object returned from calling these scorers contains a ",(0,t.jsx)(r.code,{children:"passed"})," boolean attribute to indicate whether the input text is safe or high quality as well as a ",(0,t.jsx)(r.code,{children:"metadata"})," atttribute that contains more detail such as the raw score from the model."]}),"\n",(0,t.jsx)(r.admonition,{type:"tip",children:(0,t.jsx)(r.p,{children:"While local scorers can be run on CPUs and GPUs, use GPUs for best performance."})}),"\n",(0,t.jsxs)(a.Z,{groupId:"programming-language",queryString:!0,children:[(0,t.jsxs)(o.default,{value:"python",label:"Python",default:!0,children:[(0,t.jsx)(r.h2,{id:"prerequisites",children:"Prerequisites"}),(0,t.jsx)(r.p,{children:"Before you can use Weave local scorers, install additional dependencies:"}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"pip install weave[scorers]\n"})}),(0,t.jsx)(r.h2,{id:"select-a-scorer",children:"Select a scorer"}),(0,t.jsx)(r.p,{children:"The following local scorers are available. Select a scorer based on your use case."}),(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Scorer"}),(0,t.jsx)(r.th,{children:"Scenario"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"#weavetoxicityscorerv1",children:"WeaveToxicityScorerV1"})}),(0,t.jsx)(r.td,{children:"Identify toxic or harmful content in your AI system's inputs and outputs, including hate speech or threats."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"#weavebiasscorerv1",children:"WeaveBiasScorerV1"})}),(0,t.jsx)(r.td,{children:"Detect biased or stereotypical content in your AI system's inputs and outputs. Ideal for reducing harmful biases in generated text."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"#weavehallucinationscorerv1",children:"WeaveHallucinationScorerV1"})}),(0,t.jsx)(r.td,{children:"Identify whether your RAG system generates hallucinations in its output based on the input and context provided."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"#weavecontextrelevancescorerv1",children:"WeaveContextRelevanceScorerV1"})}),(0,t.jsx)(r.td,{children:"Measure whether the AI system's output is relevant to the input and context provided."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"#weavecoherencescorerv1",children:"WeaveCoherenceScorerV1"})}),(0,t.jsx)(r.td,{children:"Evaluate the coherence and logical structure of the AI system's output."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"#weavefluencyscorerv1",children:"WeaveFluencyScorerV1"})}),(0,t.jsx)(r.td,{children:"Measure whether the AI system's output is fluent."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"#weavetrustscorerv1",children:"WeaveTrustScorerV1"})}),(0,t.jsx)(r.td,{children:"An aggregate scorer that leverages the toxicity, hallucination, context relevance, fluency, coherence scorers."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.a,{href:"#presidioscorer",children:"PresidioScorer"})}),(0,t.jsx)(r.td,{children:"Detect Personally Identifiable Information (PII) in your AI system's inputs and outputs using the Presidio library from Microsoft."})]})]})]}),(0,t.jsx)(r.h2,{id:"weavebiasscorerv1",children:(0,t.jsx)(r.code,{children:"WeaveBiasScorerV1"})}),(0,t.jsx)(r.p,{children:"This scorer assesses gender and race/origin bias. The scorer assesses bias along two dimensions:"}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Race and Origin: Racism and bias against a country or region of origin, immigration status, ethnicity, etc."}),"\n",(0,t.jsx)(r.li,{children:"Gender and Sexuality: Sexism, misogyny, homophobia, transphobia, sexual harassment, etc."}),"\n"]}),(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"WeaveBiasScorerV1"})," uses a fine-tuned ",(0,t.jsx)(r.a,{href:"https://huggingface.co/tasksource/deberta-small-long-nli",children:"deberta-small-long-nli"})," model. For more details on the model, dataset and calibration process, see the ",(0,t.jsx)(r.a,{href:"https://wandb.ai/c-metrics/bias-benchmark/reports/Bias-Scorer--VmlldzoxMDM2MTgzNw",children:"WeaveBiasScorerV1 W&B Report"})]}),(0,t.jsx)(r.h3,{id:"usage-notes",children:"Usage notes"}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["The ",(0,t.jsx)(r.code,{children:"score"})," method expects a string to be passed to the ",(0,t.jsx)(r.code,{children:"output"})," parameter."]}),"\n",(0,t.jsx)(r.li,{children:"A higher score means that there is a stronger prediction of bias in the text."}),"\n",(0,t.jsxs)(r.li,{children:["The ",(0,t.jsx)(r.code,{children:"threshold"})," parameter is set but can also be overridden on initialization."]}),"\n"]}),(0,t.jsx)(r.h3,{id:"usage-example",children:"Usage example"}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:'import weave\nfrom weave.scorers import WeaveBiasScorerV1\n\nbias_scorer = WeaveBiasScorerV1()\nresult = bias_scorer.score(output="Martian men are terrible at cleaning")\n\nprint(f"The text is biased: {not result.passed}")\nprint(result)\n'})}),(0,t.jsx)(r.hr,{}),(0,t.jsx)(r.h2,{id:"weavetoxicityscorerv1",children:(0,t.jsx)(r.code,{children:"WeaveToxicityScorerV1"})}),(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"WeaveToxicityScorerV1"})," scorer assesses the input text for toxicity along five dimensions:"]}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Race and Origin: Racism and bias against a country or region of origin, immigration status, ethnicity, etc."}),"\n",(0,t.jsx)(r.li,{children:"Gender and Sexuality: Sexism, misogyny, homophobia, transphobia, sexual harassment, etc."}),"\n",(0,t.jsx)(r.li,{children:"Religious: Bias or stereotype against someone's religion."}),"\n",(0,t.jsx)(r.li,{children:"Ability: Bias according to someone's physical, mental, or intellectual ability or disability."}),"\n",(0,t.jsx)(r.li,{children:"Violence and Abuse: Overly graphic descriptions of violence, threats of violence, or incitement of violence."}),"\n"]}),(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"WeaveToxicityScorerV1"})," uses the open source ",(0,t.jsx)(r.a,{href:"https://huggingface.co/PleIAs/celadon",children:"Celadon"})," model from PleIAs. For more information, see the ",(0,t.jsx)(r.a,{href:"https://wandb.ai/c-metrics/toxicity-benchmark/reports/Toxicity-Scorer--VmlldzoxMDMyNjc0NQ",children:"WeaveToxicityScorerV1 W&B Report"}),"."]}),(0,t.jsx)(r.h3,{id:"usage-notes-1",children:"Usage notes"}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["The ",(0,t.jsx)(r.code,{children:"score"})," method expects a string to be passed to the ",(0,t.jsx)(r.code,{children:"output"})," parameter."]}),"\n",(0,t.jsxs)(r.li,{children:["The model returns scores from ",(0,t.jsx)(r.code,{children:"0"})," to ",(0,t.jsx)(r.code,{children:"3"})," across 5 different categories:","\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["If the sum of these scores is above ",(0,t.jsx)(r.code,{children:"total_threshold"})," (default value ",(0,t.jsx)(r.code,{children:"5"}),"), then the input is flagged as toxic."]}),"\n",(0,t.jsxs)(r.li,{children:["If any single category has a score higher than ",(0,t.jsx)(r.code,{children:"category_threshold"})," (default 2), then the input is flagged as toxic. Default values were fine-tuned to decrease false positives and improve recall."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["For more aggressive filtering, override the ",(0,t.jsx)(r.code,{children:"category_threshold"})," parameter or the ",(0,t.jsx)(r.code,{children:"total_threshold"})," parameter in the scorer constructor."]}),"\n"]}),(0,t.jsx)(r.h3,{id:"usage-example-1",children:"Usage example"}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:'import weave\nfrom weave.scorers import WeaveToxicityScorerV1\n\ntoxicity_scorer = WeaveToxicityScorerV1()\nresult = toxicity_scorer.score(output="people from the south pole of mars are the worst")\n\nprint(f"Input is toxic: {not result.passed}")\nprint(result)\n'})}),(0,t.jsx)(r.hr,{}),(0,t.jsx)(r.h2,{id:"weavehallucinationscorerv1",children:(0,t.jsx)(r.code,{children:"WeaveHallucinationScorerV1"})}),(0,t.jsx)(r.p,{children:"This scorer checks if your AI system's output contains any hallucinations based on the input data."}),(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"WeaveHallucinationScorerV1"})," uses the open source ",(0,t.jsx)(r.a,{href:"https://huggingface.co/vectara/hallucination_evaluation_model",children:"HHEM 2.1 model"})," from Vectara. For more information, see the ",(0,t.jsx)(r.a,{href:"https://wandb.ai/c-metrics/hallucination/reports/Hallucination-Scorer--VmlldzoxMDM3NDA3MA",children:"WeaveHallucinationScorerV1 W&B Report"}),"."]}),(0,t.jsx)(r.h3,{id:"usage-notes-2",children:"Usage notes"}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["The ",(0,t.jsx)(r.code,{children:"score"})," method expects data to be passed to the ",(0,t.jsx)(r.code,{children:"query"})," and ",(0,t.jsx)(r.code,{children:"output"})," parameters. The context should be passed to the ",(0,t.jsx)(r.code,{children:"output"})," parameter as a string or list of strings."]}),"\n",(0,t.jsx)(r.li,{children:"A higher output score means that there is a stronger prediction of hallucination in the output given the query and context."}),"\n",(0,t.jsxs)(r.li,{children:["The ",(0,t.jsx)(r.code,{children:"threshold"})," parameter is set, but can also be overridden upon initialization."]}),"\n"]}),(0,t.jsx)(r.h3,{id:"usage-example-2",children:"Usage example"}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:'import weave\nfrom weave.scorers import WeaveHallucinationScorerV1\n\nhallucination_scorer = WeaveHallucinationScorerV1()\n\nresult = hallucination_scorer.score(\n    query="What is the capital of Antartica?",\n    context="People in Antartica love the penguins.",\n    output="While Antartica is known for its sea life, penguins aren\'t liked there."\n)\n\nprint(f"Output is hallucinated: {not result.passed}")\nprint(result)\n'})}),(0,t.jsx)(r.hr,{}),(0,t.jsx)(r.h2,{id:"weavecontextrelevancescorerv1",children:(0,t.jsx)(r.code,{children:"WeaveContextRelevanceScorerV1"})}),(0,t.jsx)(r.p,{children:"This scorer is designed to be used when evaluating RAG systems. It scores the relevance of the context to the query."}),(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"WeaveContextRelevanceScorerV1"})," scorer uses a fine-tuned ",(0,t.jsx)(r.a,{href:"https://huggingface.co/tasksource/deberta-small-long-nli",children:"deberta-small-long-nli"})," model from tasksource. For more details, see the ",(0,t.jsx)(r.a,{href:"https://wandb.ai/c-metrics/context-relevance-scorer/reports/Context-Relevance-Scorer--VmlldzoxMDYxNjEyNA",children:"WeaveContextRelevanceScorerV1 W&B Report"}),"."]}),(0,t.jsx)(r.h3,{id:"usage-notes-3",children:"Usage notes"}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["The ",(0,t.jsx)(r.code,{children:"score"})," method expects data to be passed to the ",(0,t.jsx)(r.code,{children:"query"})," and ",(0,t.jsx)(r.code,{children:"output"})," parameters. The context should be passed to the ",(0,t.jsx)(r.code,{children:"output"})," parameter as a string or list of strings."]}),"\n",(0,t.jsx)(r.li,{children:"A higher output score means that there is a stronger prediction of that the context is relevant to the query."}),"\n",(0,t.jsxs)(r.li,{children:["The ",(0,t.jsx)(r.code,{children:"threshold"})," parameter is automatically set, but can also be overridden on initialization."]}),"\n",(0,t.jsxs)(r.li,{children:["Passing ",(0,t.jsx)(r.code,{children:"verbose = True"})," to the ",(0,t.jsx)(r.code,{children:"score"})," method will return scores for each relevant chunk of text in the context."]}),"\n"]}),(0,t.jsx)(r.h3,{id:"usage-example-3",children:"Usage example"}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:'import weave\nfrom weave.scorers import WeaveContextRelevanceScorerV1\n\ncontext_relevance_scorer = WeaveContextRelevanceScorerV1()\n\nresult = context_relevance_scorer.score(\n    query="What is the capital of Antarctica?",\n    output="The Antarctic has the happiest penguins."  # the context is passed to the output parameter\n)\n\nprint(f"Output is relevant: {result.passed}")\nprint(result)\n'})}),(0,t.jsx)(r.hr,{}),(0,t.jsx)(r.h2,{id:"weavecoherencescorerv1",children:(0,t.jsx)(r.code,{children:"WeaveCoherenceScorerV1"})}),(0,t.jsx)(r.p,{children:"This scorer checks that the input text is coherent."}),(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"WeaveCoherenceScorerV1"})," scorer uses a fine-tuned ",(0,t.jsx)(r.a,{href:"https://huggingface.co/tasksource/deberta-small-long-nli",children:"deberta-small-long-nli"})," model from tasksource. For more information, see the ",(0,t.jsx)(r.a,{href:"https://wandb.ai/c-metrics/coherence_scorer/reports/Coherence-Scorer--VmlldzoxMDI5MjA1MA",children:"WeaveCoherenceScorerV1 W&B Report"}),"."]}),(0,t.jsx)(r.h3,{id:"usage-notes-4",children:"Usage notes"}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["The ",(0,t.jsx)(r.code,{children:"score"})," method expects text to be passed to the ",(0,t.jsx)(r.code,{children:"query"})," and ",(0,t.jsx)(r.code,{children:"output"})," parameters."]}),"\n",(0,t.jsx)(r.li,{children:"A higher output score means that there is a stronger prediction of coherence in the input text."}),"\n"]}),(0,t.jsx)(r.h3,{id:"usage-example-4",children:"Usage example"}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:'import weave\nfrom weave.scorers import WeaveCoherenceScorerV1\n\ncoherence_scorer = WeaveCoherenceScorerV1()\n\nresult = coherence_scorer.score(\n    query="What is the capital of Antarctica?",\n    output="but why not monkey up day"\n)\n\nprint(f"Output is coherent: {result.passed}")\nprint(result)\n'})}),(0,t.jsx)(r.hr,{}),(0,t.jsx)(r.h2,{id:"weavefluencyscorerv1",children:(0,t.jsx)(r.code,{children:"WeaveFluencyScorerV1"})}),(0,t.jsx)(r.p,{children:"This scorer checks the input text is fluent; that is, easy to read and understand, similar to human language. The scorer assesses input along dimensions such as grammar, syntax, and overall readability."}),(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"WeaveFluencyScorerV1"})," scorer uses a fine-tuned ",(0,t.jsx)(r.a,{href:"https://huggingface.co/answerdotai/ModernBERT-base",children:"ModernBERT-base"})," model from AnswerDotAI. For more information, see the ",(0,t.jsx)(r.a,{href:"https://wandb.ai/c-metrics/fluency-eval/reports/Fluency-Scorer--VmlldzoxMTA3NzE2Ng",children:"WeaveFluencyScorerV1 W&B Report"}),"."]}),(0,t.jsx)(r.h3,{id:"usage-notes-5",children:"Usage notes"}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["The ",(0,t.jsx)(r.code,{children:"score"})," method expects text to be passed to the ",(0,t.jsx)(r.code,{children:"output"})," parameter."]}),"\n",(0,t.jsx)(r.li,{children:"A higher output score indicates higher input text fluency."}),"\n"]}),(0,t.jsx)(r.h3,{id:"usage-example-5",children:"Usage example"}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:'import weave\nfrom weave.scorers import WeaveFluencyScorerV1\n\nfluency_scorer = WeaveFluencyScorerV1()\n\nresult = fluency_scorer.score(\n    output="The cat did stretching lazily into warmth of sunlight."\n)\n\nprint(f"Output is fluent: {result.passed}")\nprint(result)\n'})}),(0,t.jsx)(r.hr,{}),(0,t.jsx)(r.h2,{id:"weavetrustscorerv1",children:(0,t.jsx)(r.code,{children:"WeaveTrustScorerV1"})}),(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"WeaveTrustScorerV1"})," is a composite scorer for RAG systems that evaluates the trustworthiness of model outputs by grouping the outputs of other scorers into two logical categories, Critical and Advisory. Based on the compostite score, ",(0,t.jsx)(r.code,{children:"WeaveTrustScorerV1"})," returns a trust level score. The values for the trust level score are:"]}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"high"}),": No issues detected"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"medium"}),": Only Advisory issues detected"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"low"}),": Critical issues detected or empty input"]}),"\n"]}),(0,t.jsxs)(r.p,{children:["Any input that does not pass a Critical scorer will automatically cause the ",(0,t.jsx)(r.code,{children:"WeaveTrustScorerV1"})," to return ",(0,t.jsx)(r.code,{children:"low"}),", while input that doesn't pass Advisory scorers will return ",(0,t.jsx)(r.code,{children:"medium"}),"."]}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Critical:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"WeaveToxicityScorerV1"}),": Detects harmful, offensive, or inappropriate content"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"WeaveHallucinationScorerV1"}),": Identifies fabricated or unsupported information"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"WeaveContextRelevanceScorerV1"}),": Ensures output relevance to provided context"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"Advisory:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"WeaveFluencyScorerV1"}),": Evaluates language quality and coherence"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"WeaveCoherenceScorerV1"}),": Checks for logical consistency and flow"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),(0,t.jsx)(r.h3,{id:"usage-notes-6",children:"Usage notes"}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"The use case for this scorer is in evalutating RAG pipelines."}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"WeaveFluencyScorerV1"})," requires query, context and output keys to score correctly."]}),"\n"]}),(0,t.jsx)(r.h3,{id:"usage-example-6",children:"Usage example"}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:'import weave\nfrom weave.scorers import WeaveTrustScorerV1\n\ntrust_scorer = WeaveTrustScorerV1()\n\n# A helper function to print the results of the trust scorer\ndef print_trust_scorer_result(result):\n    print()\n    print(f"Output is trustworthy: {result.passed}")\n    print(f"Trust level: {result.metadata[\'trust_level\']}")\n    if not result.passed:\n        print("Triggered scorers:")\n        for scorer_name, scorer_data in result.metadata[\'raw_outputs\'].items():\n            if not scorer_data.passed:\n                print(f"  - {scorer_name} did not pass")\n        print()\n\n    print(f\'WeaveToxicityScorerV1 scores: {result.metadata["scores"]["WeaveToxicityScorerV1"]}\')\n    print(f\'WeaveHallucinationScorerV1 scores: {result.metadata["scores"]["WeaveHallucinationScorerV1"]}\')\n    print(f\'WeaveContextRelevanceScorerV1 score: {result.metadata["scores"]["WeaveContextRelevanceScorerV1"]}\')\n    print(f\'WeaveCoherenceScorerV1 score: {result.metadata["scores"]["WeaveCoherenceScorerV1"]}\')\n    print(f\'WeaveFluencyScorerV1: {result.metadata["scores"]["WeaveFluencyScorerV1"]}\')\n    print()\n\n# There are 2 issues with the input data: irrelevant context, hallucinated output\nresult = trust_scorer.score(\n    query="What is the capital of Antarctica?",\n    context="People in Antarctica love the penguins.",\n    output="The cat stretched lazily in the warm sunlight."\n)\n\nprint_trust_scorer_result(result)\nprint(result)\n'})}),(0,t.jsx)(r.hr,{}),(0,t.jsx)(r.h2,{id:"presidioscorer",children:(0,t.jsx)(r.code,{children:"PresidioScorer"})}),(0,t.jsxs)(r.p,{children:["This scorer uses the ",(0,t.jsx)(r.a,{href:"https://github.com/microsoft/presidio",children:"Presidio library"})," to detect Personally Identifiable Information (PII) in your AI system's inputs and outputs."]}),(0,t.jsx)(r.h3,{id:"usage-notes-7",children:"Usage notes"}),(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["To specify specific entity types, such as emails or phone numbers, pass a list of Presidio entities to the ",(0,t.jsx)(r.code,{children:"selected_entities"})," parameter. Otherwise, Presidio will detect all entity types in its default entities list."]}),"\n",(0,t.jsxs)(r.li,{children:["Pass custom recognizers to the scorer as a list of type ",(0,t.jsx)(r.code,{children:"presidio.EntityRecognizer"})," via the ",(0,t.jsx)(r.code,{children:"custom_recognizers"})," parameter."]}),"\n",(0,t.jsxs)(r.li,{children:["To pass non-Englis input to the scorer, use the ",(0,t.jsx)(r.code,{children:"language"})," parameter to specify the language of the text."]}),"\n"]}),(0,t.jsx)(r.h3,{id:"usage-example-7",children:"Usage example"}),(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-python",children:'import weave\nfrom weave.scorers import PresidioScorer\n\npresidio_scorer = PresidioScorer()\n\nresult = presidio_scorer.score(\n    output = "Mary Jane is a software engineer at XYZ company and her email is mary.jane@xyz.com."\n)\n\nprint(f"Output contains PII: {not result.passed}")\nprint(result)\n'})})]}),(0,t.jsxs)(o.default,{value:"typescript",label:"TypeScript",children:[(0,t.jsx)(r.p,{children:"Weave local scorers are not available in TypeScript yet. Stay tuned!"}),(0,t.jsxs)(r.p,{children:["To use Weave scorers in TypeScript, see ",(0,t.jsx)(r.a,{href:"scorers#function-based-scorers",children:"function-based scorers"}),"."]})]})]})]})}function p(e={}){const{wrapper:r}={...(0,n.a)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},85162:(e,r,s)=>{s.r(r),s.d(r,{default:()=>o});s(67294);var t=s(90512);const n={tabItem:"tabItem_Ymn6"};var a=s(85893);function o(e){let{children:r,hidden:s,className:o}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,t.Z)(n.tabItem,o),hidden:s,children:r})}},65488:(e,r,s)=>{s.d(r,{Z:()=>p});var t=s(67294),n=s(90512),a=s(12466),o=s(70989),i=s(72389);const c={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var l=s(85893);function d(e){let{className:r,block:s,selectedValue:t,selectValue:o,tabValues:i}=e;const d=[],{blockElementScrollPositionUntilNextRender:h}=(0,a.o5)(),u=e=>{const r=e.currentTarget,s=d.indexOf(r),n=i[s].value;n!==t&&(h(r),o(n))},p=e=>{let r=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const s=d.indexOf(e.currentTarget)+1;r=d[s]??d[0];break}case"ArrowLeft":{const s=d.indexOf(e.currentTarget)-1;r=d[s]??d[d.length-1];break}}r?.focus()};return(0,l.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.Z)("tabs",{"tabs--block":s},r),children:i.map((e=>{let{value:r,label:s,attributes:a}=e;return(0,l.jsx)("li",{role:"tab",tabIndex:t===r?0:-1,"aria-selected":t===r,ref:e=>d.push(e),onKeyDown:p,onClick:u,...a,className:(0,n.Z)("tabs__item",c.tabItem,a?.className,{"tabs__item--active":t===r}),children:s??r},r)}))})}function h(e){let{lazy:r,children:s,selectedValue:n}=e;const a=(Array.isArray(s)?s:[s]).filter(Boolean);if(r){const e=a.find((e=>e.props.value===n));return e?(0,t.cloneElement)(e,{className:"margin-top--md"}):null}return(0,l.jsx)("div",{className:"margin-top--md",children:a.map(((e,r)=>(0,t.cloneElement)(e,{key:r,hidden:e.props.value!==n})))})}function u(e){const r=(0,o.Y)(e);return(0,l.jsxs)("div",{className:(0,n.Z)("tabs-container",c.tabList),children:[(0,l.jsx)(d,{...r,...e}),(0,l.jsx)(h,{...r,...e})]})}function p(e){const r=(0,i.default)();return(0,l.jsx)(u,{...e,children:(0,o.h)(e.children)},String(r))}},70989:(e,r,s)=>{s.d(r,{Y:()=>p,h:()=>l});var t=s(67294),n=s(16550),a=s(20469),o=s(91980),i=s(67392),c=s(20812);function l(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function d(e){const{values:r,children:s}=e;return(0,t.useMemo)((()=>{const e=r??function(e){return l(e).map((e=>{let{props:{value:r,label:s,attributes:t,default:n}}=e;return{value:r,label:s,attributes:t,default:n}}))}(s);return function(e){const r=(0,i.l)(e,((e,r)=>e.value===r.value));if(r.length>0)throw new Error(`Docusaurus error: Duplicate values "${r.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[r,s])}function h(e){let{value:r,tabValues:s}=e;return s.some((e=>e.value===r))}function u(e){let{queryString:r=!1,groupId:s}=e;const a=(0,n.k6)(),i=function(e){let{queryString:r=!1,groupId:s}=e;if("string"==typeof r)return r;if(!1===r)return null;if(!0===r&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:r,groupId:s});return[(0,o._X)(i),(0,t.useCallback)((e=>{if(!i)return;const r=new URLSearchParams(a.location.search);r.set(i,e),a.replace({...a.location,search:r.toString()})}),[i,a])]}function p(e){const{defaultValue:r,queryString:s=!1,groupId:n}=e,o=d(e),[i,l]=(0,t.useState)((()=>function(e){let{defaultValue:r,tabValues:s}=e;if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(r){if(!h({value:r,tabValues:s}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${r}" but none of its children has the corresponding value. Available values are: ${s.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return r}const t=s.find((e=>e.default))??s[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:r,tabValues:o}))),[p,x]=u({queryString:s,groupId:n}),[v,m]=function(e){let{groupId:r}=e;const s=function(e){return e?`docusaurus.tab.${e}`:null}(r),[n,a]=(0,c.Nk)(s);return[n,(0,t.useCallback)((e=>{s&&a.set(e)}),[s,a])]}({groupId:n}),j=(()=>{const e=p??v;return h({value:e,tabValues:o})?e:null})();(0,a.Z)((()=>{j&&l(j)}),[j]);return{selectedValue:i,selectValue:(0,t.useCallback)((e=>{if(!h({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),x(e),m(e)}),[x,m,o]),tabValues:o}}},11151:(e,r,s)=>{s.d(r,{Z:()=>i,a:()=>o});var t=s(67294);const n={},a=t.createContext(n);function o(e){const r=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),t.createElement(a.Provider,{value:r},e.children)}}}]);