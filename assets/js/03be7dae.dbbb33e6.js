"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7729],{97061:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var s=i(85893),t=i(11151);const r={},o="Troubleshooting",a={id:"guides/troubleshooting",title:"Troubleshooting",description:"This page provides solutions and guidance for common issues you may encounter. As we continue to expand this guide, more troubleshooting topics will be added to address a broader range of scenarios.",source:"@site/docs/guides/troubleshooting.md",sourceDirName:"guides",slug:"/guides/troubleshooting",permalink:"/guides/troubleshooting",draft:!1,unlisted:!1,editUrl:"https://github.com/wandb/weave/blob/master/docs/docs/guides/troubleshooting.md",tags:[],version:"current",lastUpdatedAt:1738357139e3,frontMatter:{},sidebar:"documentationSidebar",previous:{title:"Environment variables",permalink:"/guides/core-types/env-vars"},next:{title:"Tools & Utilities",permalink:"/guides/tools/"}},l={},c=[{value:"Trace pages load slowly",id:"trace-pages-load-slowly",level:2},{value:"Adjust via the UI (recommended)",id:"adjust-via-the-ui-recommended",level:3},{value:"Use query parameters",id:"use-query-parameters",level:3},{value:"Server Response Caching",id:"server-response-caching",level:2},{value:"When to Use Caching",id:"when-to-use-caching",level:3},{value:"How to Enable Caching",id:"how-to-enable-caching",level:3},{value:"Caching Behavior",id:"caching-behavior",level:3},{value:"Cache Size and Storage Details",id:"cache-size-and-storage-details",level:3}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.p,{children:"This page provides solutions and guidance for common issues you may encounter. As we continue to expand this guide, more troubleshooting topics will be added to address a broader range of scenarios."}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Do you have Weave troubleshooting advice to share with the community? Click ",(0,s.jsx)(n.strong,{children:"Edit this page"})," at the bottom of this guide to contribute directly by submitting a pull request."]})}),"\n",(0,s.jsx)(n.h2,{id:"trace-pages-load-slowly",children:"Trace pages load slowly"}),"\n",(0,s.jsxs)(n.p,{children:["If trace pages are loading slowly, reduce the number of rows displayed to improve load time. The default value is ",(0,s.jsx)(n.code,{children:"50"}),". You can either reduce the number of rows via the UI, or using query parameters."]}),"\n",(0,s.jsx)(n.h3,{id:"adjust-via-the-ui-recommended",children:"Adjust via the UI (recommended)"}),"\n",(0,s.jsxs)(n.p,{children:["Use the ",(0,s.jsx)(n.strong,{children:"Per page"})," control at the bottom-right of the Traces page to adjust the number of rows displayed. In addition to the default of ",(0,s.jsx)(n.code,{children:"50"}),", you can also set to ",(0,s.jsx)(n.code,{children:"10"}),", ",(0,s.jsx)(n.code,{children:"25"}),", or ",(0,s.jsx)(n.code,{children:"100"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"use-query-parameters",children:"Use query parameters"}),"\n",(0,s.jsxs)(n.p,{children:["If you prefer a manual approach, you can modify the ",(0,s.jsx)(n.code,{children:"pageSize"})," query parameter in your query URL to a value less than the maximum of ",(0,s.jsx)(n.code,{children:"100"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"server-response-caching",children:"Server Response Caching"}),"\n",(0,s.jsx)(n.p,{children:"Weave provides server response caching to improve performance when making repeated queries or working with limited network bandwidth. While currently disabled by default, this feature is expected to become the default behavior in a future release."}),"\n",(0,s.jsx)(n.h3,{id:"when-to-use-caching",children:"When to Use Caching"}),"\n",(0,s.jsx)(n.p,{children:"Server response caching is particularly beneficial when:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"You frequently run the same queries"}),"\n",(0,s.jsx)(n.li,{children:"You have limited network bandwidth"}),"\n",(0,s.jsx)(n.li,{children:"You're working in an environment with high latency"}),"\n",(0,s.jsx)(n.li,{children:"You're developing offline and want to cache responses for later use"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This feature is especially useful when running repeated evaluations on a dataset, as it allows caching the dataset between runs."}),"\n",(0,s.jsx)(n.h3,{id:"how-to-enable-caching",children:"How to Enable Caching"}),"\n",(0,s.jsx)(n.p,{children:"To enable caching, you can set the following environment variables:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Enable server response caching\nexport WEAVE_USE_SERVER_CACHE=true\n\n# Set cache size limit (default is 1GB)\nexport WEAVE_SERVER_CACHE_SIZE_LIMIT=1000000000\n\n# Set cache directory (optional, defaults to temporary directory)\nexport WEAVE_SERVER_CACHE_DIR=/path/to/cache\n"})}),"\n",(0,s.jsx)(n.h3,{id:"caching-behavior",children:"Caching Behavior"}),"\n",(0,s.jsx)(n.p,{children:"Technically, this feature will cache idempotent requests against the server. Specifically, we cache:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"obj_read"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"table_query"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"table_query_stats"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"refs_read_batch"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"file_content_read"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"cache-size-and-storage-details",children:"Cache Size and Storage Details"}),"\n",(0,s.jsxs)(n.p,{children:["The cache size is controlled by ",(0,s.jsx)(n.code,{children:"WEAVE_SERVER_CACHE_SIZE_LIMIT"})," (in bytes). The actual disk space used consists of three components:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"A constant 32KB checksum file"}),"\n",(0,s.jsx)(n.li,{children:"A Write-Ahead Log (WAL) file up to ~4MB per running client (automatically removed when the program exits)"}),"\n",(0,s.jsxs)(n.li,{children:["The main database file, which is at least 32KB and at most ",(0,s.jsx)(n.code,{children:"WEAVE_SERVER_CACHE_SIZE_LIMIT"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Total disk space used:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"While running >= 32KB + ~4MB + cache size"}),"\n",(0,s.jsx)(n.li,{children:"After exit >= 32KB + cache size"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"For example, with the a 5MB cache limit:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"While running: ~9MB maximum"}),"\n",(0,s.jsx)(n.li,{children:"After exit: ~5MB maximum"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>a,a:()=>o});var s=i(67294);const t={},r=s.createContext(t);function o(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);